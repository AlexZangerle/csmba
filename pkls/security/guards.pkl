
import "https://raw.githubusercontent.com/CollaborativeStateMachines/Cirrina/refs/heads/develop/src/main/resources/pkl/csm/Csml.pkl"
import "https://raw.githubusercontent.com/AlexZangerle/csmba/main/pkls/variables.pkl" as Vars

// This module contains all guards for gasSafety SM

// Guard to check if gas leak has been detected
failedAttemptSoftlimitReached = new Csml.GuardDescription {
  expression = "\(Vars.vFailedAttemptsCount) >= 3"
}

failedAttemptHardlimitReached = new Csml.GuardDescription {
  expression = "\(Vars.vFailedAttemptsCount) >= 5"
}

isCurrentDoor = new Csml.GuardDescription {
  expression = "$doorId == \(Vars.vDoorId)"
}

checkIsEvacuationRoute = new Csml.GuardDescription {
  expression = Vars.vIsEvacuationRoute
}

isCurrentZone = new Csml.GuardDescription {
  expression = "$zone == \(Vars.vZoneId)"
}

authSuccessful = new Csml.GuardDescription {
  expression = "\(Vars.vAuthenticationStatus) == 'Success'"
}

authFailed = new Csml.GuardDescription {
  expression = "\(Vars.vAuthenticationStatus) != 'Success'"
}

allowAccess = new Csml.GuardDescription {
  expression = "\(Vars.vAccessDecision) == 'Allow'"
}

denyAccess = new Csml.GuardDescription {
  expression = "\(Vars.vAccessDecision) != 'Allow'"
}
